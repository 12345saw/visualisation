<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½›å­åº„ä¹¡å†œäº§å“é‡‡æ‘˜åœ°å›¾ (Mapbox)</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            padding: 0;
            background-color: #f5f5f5;
        }
        .map-container {
            width: 100%;
            height: 100%; /* ä½¿å®¹å™¨å¡«å……çˆ¶çº§é«˜åº¦ */
            margin: 0;
            padding: 0;
            /* border-radius: 15px; */ /* å¯ä»¥é€‰æ‹©ä¿ç•™æˆ–ç§»é™¤åœ†è§’å’Œé˜´å½± */
            /* box-shadow: 0 4px 15px rgba(0,0,0,0.1); */
            overflow: hidden; /* é˜²æ­¢åœ°å›¾æº¢å‡ºåœ†è§’å’Œé˜´å½±åŒºåŸŸ */
        }
        /* Mapbox åœ°å›¾å®¹å™¨ */
        #mapbox-map {
            width: 100%;
            height: 100%; /* ä½¿åœ°å›¾å¡«å……å®¹å™¨é«˜åº¦ */
        }
        /* è‡ªå®šä¹‰æ ‡è®°æ ·å¼ */
        .mapbox-marker-content {
            text-align: center;
            font-size: 24px;
            cursor: pointer;
        }
        .mapbox-marker-label {
            font-size: 12px;
            white-space: nowrap;
            margin-top: 2px;
        }
        /* ä¿¡æ¯çª—ä½“æ ·å¼ */
        .mapboxgl-popup-content {
             padding: 10px;
             font-family: 'Microsoft YaHei', sans-serif;
        }
         .mapboxgl-popup-content b {
             font-size: 14px;
         }
         .mapboxgl-popup-content i {
             font-size: 12px;
             color: #666;
         }
    </style>
    <!-- å¼•å…¥ Mapbox GL JS CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <!-- å¼•å…¥ Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
</head>
<body>
    <div class="map-container">
        <!-- Mapbox åœ°å›¾å®¹å™¨ -->
        <div id="mapbox-map"></div>
    </div>

    <script>
        // Mapbox Access Token
        mapboxgl.accessToken = 'pk.eyJ1IjoidHlpZ2pmZCIsImEiOiJjbWI4MDBmaTYwMG1xMmlwcjZocTVzamhzIn0.Jw6c2Uweyr_Rr2cf7eanpA';

        // åˆå§‹åŒ– Mapbox åœ°å›¾
        var map = new mapboxgl.Map({
            container: 'mapbox-map', // åœ°å›¾å®¹å™¨çš„ ID
            style: 'mapbox://styles/tyigjfd/cmb9eg1w900t701qxcd5obmdh', // æ‚¨æä¾›çš„ Mapbox æ ·å¼ URL
            center: [115.844, 39.814], // ä½›å­åº„ä¹¡äººæ°‘æ”¿åºœå¤§è‡´ç»çº¬åº¦ä½œä¸ºä¸­å¿ƒç‚¹ (ç»åº¦, çº¬åº¦)
            zoom: 12 // åˆå§‹ç¼©æ”¾çº§åˆ«ï¼Œå¯ä»¥è°ƒæ•´
        });

        // æ ‡è®°ç‚¹æ•°æ® (ç»åº¦, çº¬åº¦, åç§°, å›¾æ ‡, Slogan)
        var markers = [
            {name: 'ä½›å­åº„è¥¿å£å…¬äº¤ç«™', position: [115.843, 39.813], icon: 'ğŸšŒ', slogan: 'äº¤é€šæ¢çº½'},
            {name: 'ç£¨ç›˜æŸ¿å­å›­', position: [115.850, 39.818], icon: 'ğŸ…', slogan: 'ç§‹æ—¥å°ç¯ç¬¼ï¼Œç”œåˆ°å¿ƒåé‡Œ~'},
            {name: 'è‘¡è„ç§æ¤å›­', position: [115.848, 39.815], icon: 'ğŸ‡', slogan: 'æ‘˜ä¸€ä¸²å¤å¤©çš„å®çŸ³âœ¨'},
            {name: 'äº¬ç™½æ¢¨åŸºåœ°', position: [115.855, 39.820], icon: 'ğŸ', slogan: 'çš‡å®¶è´¡å“ï¼Œè„†å«©å¤šæ±ï¼'},
            {name: 'ä½›å­åº„è‹¹æœå›­', position: [115.846, 39.817], icon: 'ğŸ', slogan: 'å’”åš“ä¸€å£ï¼Œé˜³å…‰å‘³é“â˜€ï¸'},
            {name: 'ç‡•å±±æ¿æ —æ—', position: [115.860, 39.825], icon: 'ğŸŒ°', slogan: 'å’§å˜´ç¬‘çš„æ¯›æ —å­+æ¾é¼ æ¬è¿'},
            {name: 'ä½›å­åº„ä¹¡äººæ°‘æ”¿åºœ', position: [115.844, 39.814], icon: 'ğŸ›ï¸', slogan: 'ä½›å­åº„ä¹¡æ”¿åºœ'}
        ];

        // åœ°å›¾åŠ è½½å®Œæˆåæ·»åŠ æ ‡è®°
        map.on('load', function() {

            // å°è¯•è®¾ç½®åœ°å›¾è¯­è¨€ä¸ºä¸­æ–‡
            var languageLayerIds = [
                'country-label', // å›½å®¶åç§°
                'state-label', // çœä»½/å·åç§°
                'settlement-label', // åŸå¸‚/åŸé•‡åç§°
                'settlement-subdivision-label', // åŸå¸‚ä¸‹å±åŒºåŸŸåç§°
                'locality-label', // åœ°å
                'neighborhood-label', // ç¤¾åŒºåç§°
                'poi-label', // å…´è¶£ç‚¹åç§°
                'airport-label', // æœºåœºåç§°
                'transit-label', // å…¬å…±äº¤é€šåç§°
                'road-label', // é“è·¯åç§°
                'bridge-label', // æ¡¥æ¢åç§°
                'tunnel-label', // éš§é“åç§°
                'water-label' // æ°´ç³»åç§°
                // æ‚¨å¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„å…·ä½“æ ·å¼è°ƒæ•´æˆ–æ·»åŠ æ›´å¤šå›¾å±‚ID
            ];

            languageLayerIds.forEach(function(layerId) {
                var layer = map.getLayer(layerId);
                if (layer) {
                    // æ£€æŸ¥å›¾å±‚æ˜¯å¦æœ‰ text-field å±æ€§
                    if (layer.layout && layer.layout['text-field']) {
                         // è®¾ç½®ä¼˜å…ˆæ˜¾ç¤ºä¸­æ–‡åç§°
                        map.setLayoutProperty(layerId, 'text-field', ['get', 'name_zh']);
                    } else if (layer.type === 'symbol' && layer.layout && layer.layout['text-field']) {
                         // å¯¹äºç¬¦å·å›¾å±‚ï¼Œå°è¯•æ£€æŸ¥ name å±æ€§å¹¶è®¾ç½®ä¸ºä¸­æ–‡
                         map.setLayoutProperty(layerId, 'text-field', ['get', 'name_zh']);
                    }
                }
            });

            markers.forEach(function(markerInfo) {
                // åˆ›å»ºä¸€ä¸ª DOM å…ƒç´ ç”¨äºæ ‡è®°
                var el = document.createElement('div');
                el.className = 'mapbox-marker-content';
                el.innerHTML = markerInfo.icon; // åªæ˜¾ç¤ºå›¾æ ‡

                // æ·»åŠ é¼ æ ‡æ‚¬åœäº‹ä»¶
                el.addEventListener('mouseenter', function() {
                    // åˆ›å»ºä¿¡æ¯çª—ä½“
                    var popup = new mapboxgl.Popup({
                        offset: 25, // åç§»é‡
                        closeButton: false, // ä¸æ˜¾ç¤ºå…³é—­æŒ‰é’®
                        closeOnClick: false // ä¸ç‚¹å‡»å…³é—­
                    })
                        .setLngLat(markerInfo.position) // è®¾ç½®ä½ç½®
                        .setHTML('<div>' +
                                 '<b>' + markerInfo.name + '</b><br>' +
                                 'ç»çº¬åº¦: ' + markerInfo.position[0].toFixed(3) + ', ' + markerInfo.position[1].toFixed(3) + '<br>' + // æ ¼å¼åŒ–ç»çº¬åº¦æ˜¾ç¤º
                                 '<i>' + markerInfo.slogan + '</i>' +
                                 '</div>')
                        .addTo(map); // æ·»åŠ åˆ°åœ°å›¾

                    // å­˜å‚¨ popup å®ä¾‹åˆ° marker å…ƒç´ ä¸Šï¼Œæ–¹ä¾¿åœ¨ mouseleave ä¸­è®¿é—®
                    this._popup = popup;
                });

                el.addEventListener('mouseleave', function() {
                    // å…³é—­ä¿¡æ¯çª—ä½“
                    if (this._popup) {
                        this._popup.remove();
                        this._popup = null;
                    }
                });

                // åœ¨åœ°å›¾ä¸Šåˆ›å»ºæ ‡è®°
                new mapboxgl.Marker(el)
                    .setLngLat(markerInfo.position)
                    .addTo(map);
            });
        });

    </script>
</body>
</html> 